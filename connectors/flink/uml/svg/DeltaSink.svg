<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="959px" preserveAspectRatio="none" style="width:3352px;height:959px;background:#FFFFFF;" version="1.1" viewBox="0 0 3352 959" width="3352px" zoomAndPan="magnify"><defs/><g><!--MD5=[0d852700fdad35b7061d461d6907a324]
cluster java.io--><g id="cluster_java.io"><path d="M2209.97,6 L2256.97,6 A3.75,3.75 0 0 1 2259.47,8.5 L2266.47,29.6094 L2342.97,29.6094 A2.5,2.5 0 0 1 2345.47,32.1094 L2345.47,123.5 A2.5,2.5 0 0 1 2342.97,126 L2209.97,126 A2.5,2.5 0 0 1 2207.47,123.5 L2207.47,8.5 A2.5,2.5 0 0 1 2209.97,6 " fill="#DDDDDD" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="2207.47" x2="2266.47" y1="29.6094" y2="29.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="46" x="2211.47" y="22.5332">java.io</text></g><!--MD5=[1e5c6319ef009a639e433385c5af7ca5]
cluster org.apache.flink--><g id="cluster_org.apache.flink"><path d="M239.97,168 L353.97,168 A3.75,3.75 0 0 1 356.47,170.5 L363.47,191.6094 L985.97,191.6094 A2.5,2.5 0 0 1 988.47,194.1094 L988.47,285.5 A2.5,2.5 0 0 1 985.97,288 L239.97,288 A2.5,2.5 0 0 1 237.47,285.5 L237.47,170.5 A2.5,2.5 0 0 1 239.97,168 " fill="#DDDDDD" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="237.47" x2="363.47" y1="191.6094" y2="191.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="113" x="241.47" y="184.5332">org.apache.flink</text></g><!--MD5=[62142a680088d51d5adadc3e439399f7]
cluster io.delta.flink.internal--><g id="cluster_io.delta.flink.internal"><path d="M62.97,345 L207.97,345 A3.75,3.75 0 0 1 210.47,347.5 L217.47,368.6094 L2952.97,368.6094 A2.5,2.5 0 0 1 2955.47,371.1094 L2955.47,781.5 A2.5,2.5 0 0 1 2952.97,784 L62.97,784 A2.5,2.5 0 0 1 60.47,781.5 L60.47,347.5 A2.5,2.5 0 0 1 62.97,345 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="60.47" x2="217.47" y1="368.6094" y2="368.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="144" x="64.47" y="361.5332">io.delta.flink.internal</text></g><!--MD5=[a7ffe0d7a14e608bce382a176c5fc881]
cluster io.delta.flink.sink--><g id="cluster_io.delta.flink.sink"><path d="M3031.97,159 L3151.97,159 A3.75,3.75 0 0 1 3154.47,161.5 L3161.47,182.6094 L3342.97,182.6094 A2.5,2.5 0 0 1 3345.47,185.1094 L3345.47,506.5 A2.5,2.5 0 0 1 3342.97,509 L3031.97,509 A2.5,2.5 0 0 1 3029.47,506.5 L3029.47,161.5 A2.5,2.5 0 0 1 3031.97,159 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="3029.47" x2="3161.47" y1="182.6094" y2="182.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="119" x="3033.47" y="175.5332">io.delta.flink.sink</text></g><!--MD5=[cc3de0a176daa3c4ec875deafdf5ddd1]
class Serializable--><g id="elem_Serializable"><rect codeLine="4" fill="#F1F1F1" height="48" id="Serializable" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="105" x="2223.97" y="62"/><ellipse cx="2238.97" cy="78" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M2239.97,75 L2239.97,81 L2241.97,81 L2242.4544,81 L2242.97,81.625 L2242.97,82 L2242.97,82.375 L2242.4544,83 L2241.97,83 L2235.97,83 L2235.4856,83 L2234.97,82.375 L2234.97,82 L2234.97,81.625 L2235.4856,81 L2235.97,81 L2237.97,81 L2237.97,75 L2235.97,75 L2235.4856,75 L2234.97,74.375 L2234.97,74 L2234.97,73.625 L2235.4856,73 L2235.97,73 L2241.97,73 L2242.4544,73 L2242.97,73.625 L2242.97,74 L2242.97,74.375 L2242.4544,75 L2241.97,75 L2239.97,75 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="73" x="2252.97" y="83.7285">Serializable</text><line style="stroke:#181818;stroke-width:0.5;" x1="2224.97" x2="2327.97" y1="94" y2="94"/><line style="stroke:#181818;stroke-width:0.5;" x1="2224.97" x2="2327.97" y1="102" y2="102"/></g><!--MD5=[bb0076f36699579ceee0ebce73764b72]
class Sink--><g id="elem_Sink"><rect codeLine="9" fill="#F1F1F1" height="48" id="Sink" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="60" x="912.47" y="224"/><ellipse cx="927.47" cy="240" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M928.47,237 L928.47,243 L930.47,243 L930.9544,243 L931.47,243.625 L931.47,244 L931.47,244.375 L930.9544,245 L930.47,245 L924.47,245 L923.9856,245 L923.47,244.375 L923.47,244 L923.47,243.625 L923.9856,243 L924.47,243 L926.47,243 L926.47,237 L924.47,237 L923.9856,237 L923.47,236.375 L923.47,236 L923.47,235.625 L923.9856,235 L924.47,235 L930.47,235 L930.9544,235 L931.47,235.625 L931.47,236 L931.47,236.375 L930.9544,237 L930.47,237 L928.47,237 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="28" x="941.47" y="245.7285">Sink</text><line style="stroke:#181818;stroke-width:0.5;" x1="913.47" x2="971.47" y1="256" y2="256"/><line style="stroke:#181818;stroke-width:0.5;" x1="913.47" x2="971.47" y1="264" y2="264"/></g><!--MD5=[6d5e5023c4094e50e3b04338f20dee03]
class SinkWriter--><g id="elem_SinkWriter"><rect codeLine="11" fill="#F1F1F1" height="48" id="SinkWriter" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="99" x="425.97" y="224"/><ellipse cx="440.97" cy="240" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M441.97,237 L441.97,243 L443.97,243 L444.4544,243 L444.97,243.625 L444.97,244 L444.97,244.375 L444.4544,245 L443.97,245 L437.97,245 L437.4856,245 L436.97,244.375 L436.97,244 L436.97,243.625 L437.4856,243 L437.97,243 L439.97,243 L439.97,237 L437.97,237 L437.4856,237 L436.97,236.375 L436.97,236 L436.97,235.625 L437.4856,235 L437.97,235 L443.97,235 L444.4544,235 L444.97,235.625 L444.97,236 L444.97,236.375 L444.4544,237 L443.97,237 L441.97,237 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="67" x="454.97" y="245.7285">SinkWriter</text><line style="stroke:#181818;stroke-width:0.5;" x1="426.97" x2="523.97" y1="256" y2="256"/><line style="stroke:#181818;stroke-width:0.5;" x1="426.97" x2="523.97" y1="264" y2="264"/></g><!--MD5=[d280512bfd7996fea376c20a273f43c5]
class PendingFileRecoverable--><g id="elem_PendingFileRecoverable"><rect codeLine="13" fill="#F1F1F1" height="48" id="PendingFileRecoverable" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="186" x="560.47" y="224"/><ellipse cx="575.47" cy="240" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M576.47,237 L576.47,243 L578.47,243 L578.9544,243 L579.47,243.625 L579.47,244 L579.47,244.375 L578.9544,245 L578.47,245 L572.47,245 L571.9856,245 L571.47,244.375 L571.47,244 L571.47,243.625 L571.9856,243 L572.47,243 L574.47,243 L574.47,237 L572.47,237 L571.9856,237 L571.47,236.375 L571.47,236 L571.47,235.625 L571.9856,235 L572.47,235 L578.47,235 L578.9544,235 L579.47,235.625 L579.47,236 L579.47,236.375 L578.9544,237 L578.47,237 L576.47,237 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="154" x="589.47" y="245.7285">PendingFileRecoverable</text><line style="stroke:#181818;stroke-width:0.5;" x1="561.47" x2="745.47" y1="256" y2="256"/><line style="stroke:#181818;stroke-width:0.5;" x1="561.47" x2="745.47" y1="264" y2="264"/></g><!--MD5=[68a0117a706af7709b479396ef3ad0f1]
class GlobalCommitter--><g id="elem_GlobalCommitter"><rect codeLine="15" fill="#F1F1F1" height="48" id="GlobalCommitter" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="137" x="253.97" y="224"/><ellipse cx="268.97" cy="240" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M269.97,237 L269.97,243 L271.97,243 L272.4544,243 L272.97,243.625 L272.97,244 L272.97,244.375 L272.4544,245 L271.97,245 L265.97,245 L265.4856,245 L264.97,244.375 L264.97,244 L264.97,243.625 L265.4856,243 L265.97,243 L267.97,243 L267.97,237 L265.97,237 L265.4856,237 L264.97,236.375 L264.97,236 L264.97,235.625 L265.4856,235 L265.97,235 L271.97,235 L272.4544,235 L272.97,235.625 L272.97,236 L272.97,236.375 L272.4544,237 L271.97,237 L269.97,237 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="105" x="282.97" y="245.7285">GlobalCommitter</text><line style="stroke:#181818;stroke-width:0.5;" x1="254.97" x2="389.97" y1="256" y2="256"/><line style="stroke:#181818;stroke-width:0.5;" x1="254.97" x2="389.97" y1="264" y2="264"/></g><!--MD5=[bbeb7d1f7fcd613e5793450d43511a2e]
class Committer--><g id="elem_Committer"><rect codeLine="17" fill="#F1F1F1" height="48" id="Committer" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="96" x="781.47" y="224"/><ellipse cx="796.47" cy="240" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M797.47,237 L797.47,243 L799.47,243 L799.9544,243 L800.47,243.625 L800.47,244 L800.47,244.375 L799.9544,245 L799.47,245 L793.47,245 L792.9856,245 L792.47,244.375 L792.47,244 L792.47,243.625 L792.9856,243 L793.47,243 L795.47,243 L795.47,237 L793.47,237 L792.9856,237 L792.47,236.375 L792.47,236 L792.47,235.625 L792.9856,235 L793.47,235 L799.47,235 L799.9544,235 L800.47,235.625 L800.47,236 L800.47,236.375 L799.9544,237 L799.47,237 L797.47,237 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="64" x="810.47" y="245.7285">Committer</text><line style="stroke:#181818;stroke-width:0.5;" x1="782.47" x2="876.47" y1="256" y2="256"/><line style="stroke:#181818;stroke-width:0.5;" x1="782.47" x2="876.47" y1="264" y2="264"/></g><!--MD5=[9779f27913219c6a9721721dab39856e]
class DeltaWriter--><g id="elem_DeltaWriter"><rect codeLine="24" fill="#F1F1F1" height="118.4375" id="DeltaWriter" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="345" x="76.97" y="401"/><ellipse cx="201.22" cy="417" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M203.22,413.5 Q203.4231,413 203.6575,412.75 Q203.8919,412.5 204.1575,412.5 Q204.6263,412.5 204.9231,412.7813 Q205.22,413.0625 205.22,413.7188 L205.22,415.2813 Q205.22,415.9375 204.9388,416.2188 Q204.6575,416.5 204.22,416.5 Q203.8294,416.5 203.5794,416.3281 Q203.3294,416.1563 203.22,415.7031 Q203.1731,415.3906 203.0013,415.2188 Q202.6888,414.8906 202.1263,414.7031 Q201.5638,414.5 201.0013,414.5 Q200.2981,414.5 199.7044,414.7813 Q199.1263,415.0625 198.6731,415.6875 Q198.22,416.3125 198.22,417.1719 L198.22,418.0938 Q198.22,419.125 199.0638,419.8125 Q199.9075,420.5 201.4075,420.5 Q202.2981,420.5 202.9231,420.2969 Q203.2825,420.1875 203.6888,419.8281 Q203.9544,419.625 204.095,419.5625 Q204.2356,419.5 204.4075,419.5 Q204.7356,419.5 204.97,419.7656 Q205.22,420.0156 205.22,420.375 Q205.22,420.7188 204.8763,421.125 Q204.3763,421.7188 203.5794,422.0469 Q202.5325,422.5 201.2513,422.5 Q199.7513,422.5 198.5481,421.9063 Q197.5794,421.4375 196.8919,420.4219 Q196.22,419.4063 196.22,418.2031 L196.22,417.1094 Q196.22,415.8594 196.8138,414.7656 Q197.4231,413.6719 198.47,413.0938 Q199.5325,412.5 200.72,412.5 Q201.4388,412.5 202.0638,412.75 Q202.6888,413 203.22,413.5 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="221.72" y="422.7285">DeltaWriter</text><rect fill="#FFFFFF" height="17.0938" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="15" x="409.97" y="398"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="13" x="410.97" y="411.457">IN</text><line style="stroke:#181818;stroke-width:0.5;" x1="77.97" x2="420.97" y1="433" y2="433"/><line style="stroke:#181818;stroke-width:0.5;" x1="77.97" x2="420.97" y1="441" y2="441"/><ellipse cx="87.97" cy="455.3047" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="145" x="96.97" y="459.5332">write(IN, Context) : void</text><ellipse cx="87.97" cy="472.9141" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="319" x="96.97" y="477.1426">prepareCommit(boolean) : List&lt;DeltaCommittable&gt;</text><ellipse cx="87.97" cy="490.5234" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="298" x="96.97" y="494.752">snapshotState() : List&lt;DeltaWriterBucketState&gt;</text><ellipse cx="87.97" cy="508.1328" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="96.97" y="512.3613">close() : void</text></g><!--MD5=[ff0bf1a01a60b1344e7c09c90c3c115a]
class DeltaCommittable--><g id="elem_DeltaCommittable"><rect codeLine="32" fill="#F1F1F1" height="100.8281" id="DeltaCommittable" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="252" x="2666.47" y="632"/><ellipse cx="2732.72" cy="648" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M2734.72,644.5 Q2734.9231,644 2735.1575,643.75 Q2735.3919,643.5 2735.6575,643.5 Q2736.1263,643.5 2736.4231,643.7813 Q2736.72,644.0625 2736.72,644.7188 L2736.72,646.2813 Q2736.72,646.9375 2736.4388,647.2188 Q2736.1575,647.5 2735.72,647.5 Q2735.3294,647.5 2735.0794,647.3281 Q2734.8294,647.1563 2734.72,646.7031 Q2734.6731,646.3906 2734.5013,646.2188 Q2734.1888,645.8906 2733.6263,645.7031 Q2733.0638,645.5 2732.5013,645.5 Q2731.7981,645.5 2731.2044,645.7813 Q2730.6263,646.0625 2730.1731,646.6875 Q2729.72,647.3125 2729.72,648.1719 L2729.72,649.0938 Q2729.72,650.125 2730.5638,650.8125 Q2731.4075,651.5 2732.9075,651.5 Q2733.7981,651.5 2734.4231,651.2969 Q2734.7825,651.1875 2735.1888,650.8281 Q2735.4544,650.625 2735.595,650.5625 Q2735.7356,650.5 2735.9075,650.5 Q2736.2356,650.5 2736.47,650.7656 Q2736.72,651.0156 2736.72,651.375 Q2736.72,651.7188 2736.3763,652.125 Q2735.8763,652.7188 2735.0794,653.0469 Q2734.0325,653.5 2732.7513,653.5 Q2731.2513,653.5 2730.0481,652.9063 Q2729.0794,652.4375 2728.3919,651.4219 Q2727.72,650.4063 2727.72,649.2031 L2727.72,648.1094 Q2727.72,646.8594 2728.3138,645.7656 Q2728.9231,644.6719 2729.97,644.0938 Q2731.0325,643.5 2732.22,643.5 Q2732.9388,643.5 2733.5638,643.75 Q2734.1888,644 2734.72,644.5 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="2753.22" y="653.7285">DeltaCommittable</text><line style="stroke:#181818;stroke-width:0.5;" x1="2667.47" x2="2917.47" y1="664" y2="664"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="2674.47" y="675.3047"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="226" x="2686.47" y="682.5332">deltaPendingFile : DeltaPendingFile</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="2674.47" y="692.9141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="2686.47" y="700.1426">appId : String</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="2674.47" y="710.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118" x="2686.47" y="717.752">checkpointId : long</text><line style="stroke:#181818;stroke-width:0.5;" x1="2667.47" x2="2917.47" y1="724.8281" y2="724.8281"/></g><!--MD5=[67da3da455538ab5a48167fba34dd980]
class DeltaPendingFile--><g id="elem_DeltaPendingFile"><rect codeLine="38" fill="#F1F1F1" height="171.2656" id="DeltaPendingFile" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="320" x="1197.47" y="597"/><ellipse cx="1299.22" cy="613" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1301.22,609.5 Q1301.4231,609 1301.6575,608.75 Q1301.8919,608.5 1302.1575,608.5 Q1302.6263,608.5 1302.9231,608.7813 Q1303.22,609.0625 1303.22,609.7188 L1303.22,611.2813 Q1303.22,611.9375 1302.9388,612.2188 Q1302.6575,612.5 1302.22,612.5 Q1301.8294,612.5 1301.5794,612.3281 Q1301.3294,612.1563 1301.22,611.7031 Q1301.1731,611.3906 1301.0013,611.2188 Q1300.6888,610.8906 1300.1263,610.7031 Q1299.5638,610.5 1299.0013,610.5 Q1298.2981,610.5 1297.7044,610.7813 Q1297.1263,611.0625 1296.6731,611.6875 Q1296.22,612.3125 1296.22,613.1719 L1296.22,614.0938 Q1296.22,615.125 1297.0638,615.8125 Q1297.9075,616.5 1299.4075,616.5 Q1300.2981,616.5 1300.9231,616.2969 Q1301.2825,616.1875 1301.6888,615.8281 Q1301.9544,615.625 1302.095,615.5625 Q1302.2356,615.5 1302.4075,615.5 Q1302.7356,615.5 1302.97,615.7656 Q1303.22,616.0156 1303.22,616.375 Q1303.22,616.7188 1302.8763,617.125 Q1302.3763,617.7188 1301.5794,618.0469 Q1300.5325,618.5 1299.2513,618.5 Q1297.7513,618.5 1296.5481,617.9063 Q1295.5794,617.4375 1294.8919,616.4219 Q1294.22,615.4063 1294.22,614.2031 L1294.22,613.1094 Q1294.22,611.8594 1294.8138,610.7656 Q1295.4231,609.6719 1296.47,609.0938 Q1297.5325,608.5 1298.72,608.5 Q1299.4388,608.5 1300.0638,608.75 Q1300.6888,609 1301.22,609.5 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="1319.72" y="618.7285">DeltaPendingFile</text><line style="stroke:#181818;stroke-width:0.5;" x1="1198.47" x2="1516.47" y1="629" y2="629"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1205.47" y="640.3047"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="294" x="1217.47" y="647.5332">partitionSpec : LinkedHashMap&lt;String, String&gt;</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1205.47" y="657.9141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="1217.47" y="665.1426">fileName : String</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1205.47" y="675.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="241" x="1217.47" y="682.752">pendingFile : PendingFileRecoverable</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1205.47" y="693.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118" x="1217.47" y="700.3613">recordCount : long</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1205.47" y="710.7422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="1217.47" y="717.9707">fileSize : long</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1205.47" y="728.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="137" x="1217.47" y="735.5801">lastUpdateTime : long</text><line style="stroke:#181818;stroke-width:0.5;" x1="1198.47" x2="1516.47" y1="742.6563" y2="742.6563"/><ellipse cx="1208.47" cy="756.9609" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="1217.47" y="761.1895">toAddFile() : AddFile</text></g><!--MD5=[e2e9043ed31ee3b01195dcebf0ed7757]
class DeltaWriterBucketState--><g id="elem_DeltaWriterBucketState"><rect codeLine="49" fill="#F1F1F1" height="153.6563" id="DeltaWriterBucketState" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="179" x="1552.97" y="605.5"/><ellipse cx="1567.97" cy="621.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1569.97,618 Q1570.1731,617.5 1570.4075,617.25 Q1570.6419,617 1570.9075,617 Q1571.3763,617 1571.6731,617.2813 Q1571.97,617.5625 1571.97,618.2188 L1571.97,619.7813 Q1571.97,620.4375 1571.6888,620.7188 Q1571.4075,621 1570.97,621 Q1570.5794,621 1570.3294,620.8281 Q1570.0794,620.6563 1569.97,620.2031 Q1569.9231,619.8906 1569.7513,619.7188 Q1569.4388,619.3906 1568.8763,619.2031 Q1568.3138,619 1567.7513,619 Q1567.0481,619 1566.4544,619.2813 Q1565.8763,619.5625 1565.4231,620.1875 Q1564.97,620.8125 1564.97,621.6719 L1564.97,622.5938 Q1564.97,623.625 1565.8138,624.3125 Q1566.6575,625 1568.1575,625 Q1569.0481,625 1569.6731,624.7969 Q1570.0325,624.6875 1570.4388,624.3281 Q1570.7044,624.125 1570.845,624.0625 Q1570.9856,624 1571.1575,624 Q1571.4856,624 1571.72,624.2656 Q1571.97,624.5156 1571.97,624.875 Q1571.97,625.2188 1571.6263,625.625 Q1571.1263,626.2188 1570.3294,626.5469 Q1569.2825,627 1568.0013,627 Q1566.5013,627 1565.2981,626.4063 Q1564.3294,625.9375 1563.6419,624.9219 Q1562.97,623.9063 1562.97,622.7031 L1562.97,621.6094 Q1562.97,620.3594 1563.5638,619.2656 Q1564.1731,618.1719 1565.22,617.5938 Q1566.2825,617 1567.47,617 Q1568.1888,617 1568.8138,617.25 Q1569.4388,617.5 1569.97,618 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="147" x="1581.97" y="627.2285">DeltaWriterBucketState</text><line style="stroke:#181818;stroke-width:0.5;" x1="1553.97" x2="1730.97" y1="637.5" y2="637.5"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1560.97" y="648.8047"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="1572.97" y="656.0332">bucketId : String</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1560.97" y="666.4141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112" x="1572.97" y="673.6426">bucketPath : Path</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1560.97" y="684.0234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="1572.97" y="691.252">appId : String</text><line style="stroke:#181818;stroke-width:0.5;" x1="1553.97" x2="1730.97" y1="698.3281" y2="698.3281"/><ellipse cx="1563.97" cy="712.6328" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133" x="1572.97" y="716.8613">getBucketId() : String</text><ellipse cx="1563.97" cy="730.2422" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="143" x="1572.97" y="734.4707">getBucketPath() : Path</text><ellipse cx="1563.97" cy="747.8516" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115" x="1572.97" y="752.0801">getAppId() : String</text></g><!--MD5=[f6e6992a31e8856373f64943683ee241]
class DeltaGlobalCommittable--><g id="elem_DeltaGlobalCommittable"><rect codeLine="59" fill="#F1F1F1" height="83.2188" id="DeltaGlobalCommittable" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="335" x="2603.97" y="418.5"/><ellipse cx="2691.22" cy="434.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M2693.22,431 Q2693.4231,430.5 2693.6575,430.25 Q2693.8919,430 2694.1575,430 Q2694.6263,430 2694.9231,430.2813 Q2695.22,430.5625 2695.22,431.2188 L2695.22,432.7813 Q2695.22,433.4375 2694.9388,433.7188 Q2694.6575,434 2694.22,434 Q2693.8294,434 2693.5794,433.8281 Q2693.3294,433.6563 2693.22,433.2031 Q2693.1731,432.8906 2693.0013,432.7188 Q2692.6888,432.3906 2692.1263,432.2031 Q2691.5638,432 2691.0013,432 Q2690.2981,432 2689.7044,432.2813 Q2689.1263,432.5625 2688.6731,433.1875 Q2688.22,433.8125 2688.22,434.6719 L2688.22,435.5938 Q2688.22,436.625 2689.0638,437.3125 Q2689.9075,438 2691.4075,438 Q2692.2981,438 2692.9231,437.7969 Q2693.2825,437.6875 2693.6888,437.3281 Q2693.9544,437.125 2694.095,437.0625 Q2694.2356,437 2694.4075,437 Q2694.7356,437 2694.97,437.2656 Q2695.22,437.5156 2695.22,437.875 Q2695.22,438.2188 2694.8763,438.625 Q2694.3763,439.2188 2693.5794,439.5469 Q2692.5325,440 2691.2513,440 Q2689.7513,440 2688.5481,439.4063 Q2687.5794,438.9375 2686.8919,437.9219 Q2686.22,436.9063 2686.22,435.7031 L2686.22,434.6094 Q2686.22,433.3594 2686.8138,432.2656 Q2687.4231,431.1719 2688.47,430.5938 Q2689.5325,430 2690.72,430 Q2691.4388,430 2692.0638,430.25 Q2692.6888,430.5 2693.22,431 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="152" x="2711.72" y="440.2285">DeltaGlobalCommittable</text><line style="stroke:#181818;stroke-width:0.5;" x1="2604.97" x2="2937.97" y1="450.5" y2="450.5"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="2611.97" y="461.8047"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="277" x="2623.97" y="469.0332">deltaCommittables : List&lt;DeltaCommittable&gt;</text><line style="stroke:#181818;stroke-width:0.5;" x1="2604.97" x2="2937.97" y1="476.1094" y2="476.1094"/><ellipse cx="2614.97" cy="490.4141" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="309" x="2623.97" y="494.6426">getDeltaCommittables() : List&lt;DeltaCommittable&gt;</text></g><!--MD5=[4f06e3a322efa8d43469f55d5f249a2f]
class DeltaSinkInternal--><g id="elem_DeltaSinkInternal"><rect codeLine="65" fill="#F1F1F1" height="100.8281" id="DeltaSinkInternal" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="844" x="1104.47" y="409.5"/><ellipse cx="1468.72" cy="425.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1470.72,422 Q1470.9231,421.5 1471.1575,421.25 Q1471.3919,421 1471.6575,421 Q1472.1263,421 1472.4231,421.2813 Q1472.72,421.5625 1472.72,422.2188 L1472.72,423.7813 Q1472.72,424.4375 1472.4388,424.7188 Q1472.1575,425 1471.72,425 Q1471.3294,425 1471.0794,424.8281 Q1470.8294,424.6563 1470.72,424.2031 Q1470.6731,423.8906 1470.5013,423.7188 Q1470.1888,423.3906 1469.6263,423.2031 Q1469.0638,423 1468.5013,423 Q1467.7981,423 1467.2044,423.2813 Q1466.6263,423.5625 1466.1731,424.1875 Q1465.72,424.8125 1465.72,425.6719 L1465.72,426.5938 Q1465.72,427.625 1466.5638,428.3125 Q1467.4075,429 1468.9075,429 Q1469.7981,429 1470.4231,428.7969 Q1470.7825,428.6875 1471.1888,428.3281 Q1471.4544,428.125 1471.595,428.0625 Q1471.7356,428 1471.9075,428 Q1472.2356,428 1472.47,428.2656 Q1472.72,428.5156 1472.72,428.875 Q1472.72,429.2188 1472.3763,429.625 Q1471.8763,430.2188 1471.0794,430.5469 Q1470.0325,431 1468.7513,431 Q1467.2513,431 1466.0481,430.4063 Q1465.0794,429.9375 1464.3919,428.9219 Q1463.72,427.9063 1463.72,426.7031 L1463.72,425.6094 Q1463.72,424.3594 1464.3138,423.2656 Q1464.9231,422.1719 1465.97,421.5938 Q1467.0325,421 1468.22,421 Q1468.9388,421 1469.5638,421.25 Q1470.1888,421.5 1470.72,422 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107" x="1489.22" y="431.2285">DeltaSinkInternal</text><line style="stroke:#181818;stroke-width:0.5;" x1="1105.47" x2="1947.47" y1="441.5" y2="441.5"/><line style="stroke:#181818;stroke-width:0.5;" x1="1105.47" x2="1947.47" y1="449.5" y2="449.5"/><ellipse cx="1115.47" cy="463.8047" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="818" x="1124.47" y="468.0332">createWriter(InitContext context, List&lt;DeltaWriterBucketState&gt; states : DeltaWriter&lt;IN, DeltaCommittable, DeltaWriterBucketState&gt;</text><ellipse cx="1115.47" cy="481.4141" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="386" x="1124.47" y="485.6426">createCommitter() : Optional&lt;Committer&lt;DeltaCommittable&gt;&gt;</text><ellipse cx="1115.47" cy="499.0234" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="628" x="1124.47" y="503.252">createGlobalCommitter() : Optional&lt;GlobalCommitter&lt;DeltaCommittable, DeltaGlobalCommittable&gt;&gt;</text></g><!--MD5=[7e256d0fc132b2d7d52de850b4208c55]
class DeltaSinkBuilder--><g id="elem_DeltaSinkBuilder"><rect codeLine="72" fill="#F1F1F1" height="83.2188" id="DeltaSinkBuilder" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="585" x="1983.97" y="418.5"/><ellipse cx="2211.72" cy="434.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M2213.72,431 Q2213.9231,430.5 2214.1575,430.25 Q2214.3919,430 2214.6575,430 Q2215.1263,430 2215.4231,430.2813 Q2215.72,430.5625 2215.72,431.2188 L2215.72,432.7813 Q2215.72,433.4375 2215.4388,433.7188 Q2215.1575,434 2214.72,434 Q2214.3294,434 2214.0794,433.8281 Q2213.8294,433.6563 2213.72,433.2031 Q2213.6731,432.8906 2213.5013,432.7188 Q2213.1888,432.3906 2212.6263,432.2031 Q2212.0638,432 2211.5013,432 Q2210.7981,432 2210.2044,432.2813 Q2209.6263,432.5625 2209.1731,433.1875 Q2208.72,433.8125 2208.72,434.6719 L2208.72,435.5938 Q2208.72,436.625 2209.5638,437.3125 Q2210.4075,438 2211.9075,438 Q2212.7981,438 2213.4231,437.7969 Q2213.7825,437.6875 2214.1888,437.3281 Q2214.4544,437.125 2214.595,437.0625 Q2214.7356,437 2214.9075,437 Q2215.2356,437 2215.47,437.2656 Q2215.72,437.5156 2215.72,437.875 Q2215.72,438.2188 2215.3763,438.625 Q2214.8763,439.2188 2214.0794,439.5469 Q2213.0325,440 2211.7513,440 Q2210.2513,440 2209.0481,439.4063 Q2208.0794,438.9375 2207.3919,437.9219 Q2206.72,436.9063 2206.72,435.7031 L2206.72,434.6094 Q2206.72,433.3594 2207.3138,432.2656 Q2207.9231,431.1719 2208.97,430.5938 Q2210.0325,430 2211.22,430 Q2211.9388,430 2212.5638,430.25 Q2213.1888,430.5 2213.72,431 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104" x="2232.22" y="440.2285">DeltaSinkBuilder</text><rect fill="#FFFFFF" height="17.0938" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="15" x="2556.97" y="415.5"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="13" x="2557.97" y="428.957">IN</text><line style="stroke:#181818;stroke-width:0.5;" x1="1984.97" x2="2567.97" y1="450.5" y2="450.5"/><line style="stroke:#181818;stroke-width:0.5;" x1="1984.97" x2="2567.97" y1="458.5" y2="458.5"/><ellipse cx="1994.97" cy="472.8047" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="317" x="2003.97" y="477.0332">createCommitter() : Committer&lt;DeltaCommittable&gt;</text><ellipse cx="1994.97" cy="490.4141" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="559" x="2003.97" y="494.6426">createGlobalCommitter() : GlobalCommitter&lt;DeltaCommittable, DeltaGlobalCommittable&gt;</text></g><!--MD5=[b6b0ce426c65d76741de1ed65d91adcb]
class DefaultDeltaFormatBuilder--><g id="elem_DefaultDeltaFormatBuilder"><rect codeLine="78" fill="#F1F1F1" height="65.6094" id="DefaultDeltaFormatBuilder" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="216" x="2168.47" y="649.5"/><ellipse cx="2183.47" cy="665.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M2185.47,662 Q2185.6731,661.5 2185.9075,661.25 Q2186.1419,661 2186.4075,661 Q2186.8763,661 2187.1731,661.2813 Q2187.47,661.5625 2187.47,662.2188 L2187.47,663.7813 Q2187.47,664.4375 2187.1888,664.7188 Q2186.9075,665 2186.47,665 Q2186.0794,665 2185.8294,664.8281 Q2185.5794,664.6563 2185.47,664.2031 Q2185.4231,663.8906 2185.2513,663.7188 Q2184.9388,663.3906 2184.3763,663.2031 Q2183.8138,663 2183.2513,663 Q2182.5481,663 2181.9544,663.2813 Q2181.3763,663.5625 2180.9231,664.1875 Q2180.47,664.8125 2180.47,665.6719 L2180.47,666.5938 Q2180.47,667.625 2181.3138,668.3125 Q2182.1575,669 2183.6575,669 Q2184.5481,669 2185.1731,668.7969 Q2185.5325,668.6875 2185.9388,668.3281 Q2186.2044,668.125 2186.345,668.0625 Q2186.4856,668 2186.6575,668 Q2186.9856,668 2187.22,668.2656 Q2187.47,668.5156 2187.47,668.875 Q2187.47,669.2188 2187.1263,669.625 Q2186.6263,670.2188 2185.8294,670.5469 Q2184.7825,671 2183.5013,671 Q2182.0013,671 2180.7981,670.4063 Q2179.8294,669.9375 2179.1419,668.9219 Q2178.47,667.9063 2178.47,666.7031 L2178.47,665.6094 Q2178.47,664.3594 2179.0638,663.2656 Q2179.6731,662.1719 2180.72,661.5938 Q2181.7825,661 2182.97,661 Q2183.6888,661 2184.3138,661.25 Q2184.9388,661.5 2185.47,662 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167" x="2197.47" y="671.2285">DefaultDeltaFormatBuilder</text><rect fill="#FFFFFF" height="17.0938" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="15" x="2372.47" y="646.5"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="13" x="2373.47" y="659.957">IN</text><line style="stroke:#181818;stroke-width:0.5;" x1="2169.47" x2="2383.47" y1="681.5" y2="681.5"/><line style="stroke:#181818;stroke-width:0.5;" x1="2169.47" x2="2383.47" y1="689.5" y2="689.5"/><ellipse cx="2179.47" cy="703.8047" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="187" x="2188.47" y="708.0332">build() : DeltaSinkInternal&lt;IN&gt;</text></g><!--MD5=[345ee10c098daf0a1e93a14a524e3aad]
class DeltaCommitter--><g id="elem_DeltaCommitter"><rect codeLine="83" fill="#F1F1F1" height="65.6094" id="DeltaCommitter" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="390" x="634.47" y="427"/><ellipse cx="776.72" cy="443" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M778.72,439.5 Q778.9231,439 779.1575,438.75 Q779.3919,438.5 779.6575,438.5 Q780.1263,438.5 780.4231,438.7813 Q780.72,439.0625 780.72,439.7188 L780.72,441.2813 Q780.72,441.9375 780.4388,442.2188 Q780.1575,442.5 779.72,442.5 Q779.3294,442.5 779.0794,442.3281 Q778.8294,442.1563 778.72,441.7031 Q778.6731,441.3906 778.5013,441.2188 Q778.1888,440.8906 777.6263,440.7031 Q777.0638,440.5 776.5013,440.5 Q775.7981,440.5 775.2044,440.7813 Q774.6263,441.0625 774.1731,441.6875 Q773.72,442.3125 773.72,443.1719 L773.72,444.0938 Q773.72,445.125 774.5638,445.8125 Q775.4075,446.5 776.9075,446.5 Q777.7981,446.5 778.4231,446.2969 Q778.7825,446.1875 779.1888,445.8281 Q779.4544,445.625 779.595,445.5625 Q779.7356,445.5 779.9075,445.5 Q780.2356,445.5 780.47,445.7656 Q780.72,446.0156 780.72,446.375 Q780.72,446.7188 780.3763,447.125 Q779.8763,447.7188 779.0794,448.0469 Q778.0325,448.5 776.7513,448.5 Q775.2513,448.5 774.0481,447.9063 Q773.0794,447.4375 772.3919,446.4219 Q771.72,445.4063 771.72,444.2031 L771.72,443.1094 Q771.72,441.8594 772.3138,440.7656 Q772.9231,439.6719 773.97,439.0938 Q775.0325,438.5 776.22,438.5 Q776.9388,438.5 777.5638,438.75 Q778.1888,439 778.72,439.5 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="797.22" y="448.7285">DeltaCommitter</text><line style="stroke:#181818;stroke-width:0.5;" x1="635.47" x2="1023.47" y1="459" y2="459"/><line style="stroke:#181818;stroke-width:0.5;" x1="635.47" x2="1023.47" y1="467" y2="467"/><ellipse cx="645.47" cy="481.3047" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="364" x="654.47" y="485.5332">commit(List&lt;DeltaCommittable&gt;) : List&lt;DeltaCommittable&gt;</text></g><!--MD5=[bf7c758de6157436b415513edb63384d]
class DeltaGlobalCommitter--><g id="elem_DeltaGlobalCommitter"><rect codeLine="88" fill="#F1F1F1" height="83.2188" id="DeltaGlobalCommitter" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="472" x="690.47" y="641"/><ellipse cx="853.22" cy="657" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M855.22,653.5 Q855.4231,653 855.6575,652.75 Q855.8919,652.5 856.1575,652.5 Q856.6263,652.5 856.9231,652.7813 Q857.22,653.0625 857.22,653.7188 L857.22,655.2813 Q857.22,655.9375 856.9388,656.2188 Q856.6575,656.5 856.22,656.5 Q855.8294,656.5 855.5794,656.3281 Q855.3294,656.1563 855.22,655.7031 Q855.1731,655.3906 855.0013,655.2188 Q854.6888,654.8906 854.1263,654.7031 Q853.5638,654.5 853.0013,654.5 Q852.2981,654.5 851.7044,654.7813 Q851.1263,655.0625 850.6731,655.6875 Q850.22,656.3125 850.22,657.1719 L850.22,658.0938 Q850.22,659.125 851.0638,659.8125 Q851.9075,660.5 853.4075,660.5 Q854.2981,660.5 854.9231,660.2969 Q855.2825,660.1875 855.6888,659.8281 Q855.9544,659.625 856.095,659.5625 Q856.2356,659.5 856.4075,659.5 Q856.7356,659.5 856.97,659.7656 Q857.22,660.0156 857.22,660.375 Q857.22,660.7188 856.8763,661.125 Q856.3763,661.7188 855.5794,662.0469 Q854.5325,662.5 853.2513,662.5 Q851.7513,662.5 850.5481,661.9063 Q849.5794,661.4375 848.8919,660.4219 Q848.22,659.4063 848.22,658.2031 L848.22,657.1094 Q848.22,655.8594 848.8138,654.7656 Q849.4231,653.6719 850.47,653.0938 Q851.5325,652.5 852.72,652.5 Q853.4388,652.5 854.0638,652.75 Q854.6888,653 855.22,653.5 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="138" x="873.72" y="662.7285">DeltaGlobalCommitter</text><line style="stroke:#181818;stroke-width:0.5;" x1="691.47" x2="1161.47" y1="673" y2="673"/><line style="stroke:#181818;stroke-width:0.5;" x1="691.47" x2="1161.47" y1="681" y2="681"/><ellipse cx="701.47" cy="695.3047" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="376" x="710.47" y="699.5332">combine(List&lt;DeltaCommittable&gt;) : DeltaGlobalCommittable</text><ellipse cx="701.47" cy="712.9141" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="446" x="710.47" y="717.1426">commit(List&lt;DeltaGlobalCommittable&gt;) : List&lt;DeltaGlobalCommittable&gt;</text></g><path d="M457.47,433.5 L457.47,476.2031 A0,0 0 0 0 457.47,476.2031 L599.47,476.2031 A0,0 0 0 0 599.47,476.2031 L599.47,458.8516 L638.47,479.8047 L599.47,450.8516 L599.47,443.5 L589.47,433.5 L457.47,433.5 A0,0 0 0 0 457.47,433.5 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M589.47,433.5 L589.47,443.5 L599.47,443.5 L589.47,433.5 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="463.47" y="451.9951">Commit Parquet files</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="463.47" y="468.3467">locally to disk.</text><path d="M477.97,664.5 L477.97,690.8516 A0,0 0 0 0 477.97,690.8516 L654.97,690.8516 A0,0 0 0 0 654.97,690.8516 L654.97,682.5 L694.47,711.4141 L654.97,674.5 L654.97,674.5 L644.97,664.5 L477.97,664.5 A0,0 0 0 0 477.97,664.5 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M644.97,664.5 L644.97,674.5 L654.97,674.5 L644.97,664.5 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="483.97" y="682.9951">Commit data to _delta_log.</text><!--MD5=[79e952c6d247f5a34d820880278c6297]
class DeltaSink--><g id="elem_DeltaSink"><rect codeLine="105" fill="#F1F1F1" height="65.6094" id="DeltaSink" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="283" x="3045.97" y="427"/><ellipse cx="3144.72" cy="443" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M3146.72,439.5 Q3146.9231,439 3147.1575,438.75 Q3147.3919,438.5 3147.6575,438.5 Q3148.1263,438.5 3148.4231,438.7813 Q3148.72,439.0625 3148.72,439.7188 L3148.72,441.2813 Q3148.72,441.9375 3148.4388,442.2188 Q3148.1575,442.5 3147.72,442.5 Q3147.3294,442.5 3147.0794,442.3281 Q3146.8294,442.1563 3146.72,441.7031 Q3146.6731,441.3906 3146.5013,441.2188 Q3146.1888,440.8906 3145.6263,440.7031 Q3145.0638,440.5 3144.5013,440.5 Q3143.7981,440.5 3143.2044,440.7813 Q3142.6263,441.0625 3142.1731,441.6875 Q3141.72,442.3125 3141.72,443.1719 L3141.72,444.0938 Q3141.72,445.125 3142.5638,445.8125 Q3143.4075,446.5 3144.9075,446.5 Q3145.7981,446.5 3146.4231,446.2969 Q3146.7825,446.1875 3147.1888,445.8281 Q3147.4544,445.625 3147.595,445.5625 Q3147.7356,445.5 3147.9075,445.5 Q3148.2356,445.5 3148.47,445.7656 Q3148.72,446.0156 3148.72,446.375 Q3148.72,446.7188 3148.3763,447.125 Q3147.8763,447.7188 3147.0794,448.0469 Q3146.0325,448.5 3144.7513,448.5 Q3143.2513,448.5 3142.0481,447.9063 Q3141.0794,447.4375 3140.3919,446.4219 Q3139.72,445.4063 3139.72,444.2031 L3139.72,443.1094 Q3139.72,441.8594 3140.3138,440.7656 Q3140.9231,439.6719 3141.97,439.0938 Q3143.0325,438.5 3144.22,438.5 Q3144.9388,438.5 3145.5638,438.75 Q3146.1888,439 3146.72,439.5 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60" x="3165.22" y="448.7285">DeltaSink</text><rect fill="#FFFFFF" height="17.0938" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="15" x="3316.97" y="424"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="13" x="3317.97" y="437.457">IN</text><line style="stroke:#181818;stroke-width:0.5;" x1="3046.97" x2="3327.97" y1="459" y2="459"/><line style="stroke:#181818;stroke-width:0.5;" x1="3046.97" x2="3327.97" y1="467" y2="467"/><ellipse cx="3056.97" cy="481.3047" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="257" x="3065.97" y="485.5332">forRowData() : RowDataDeltaSinkBuilder</text></g><!--MD5=[232d9d6da5308969e0b515fcec7927b0]
class RowDataDeltaSinkBuilder--><g id="elem_RowDataDeltaSinkBuilder"><rect codeLine="110" fill="#F1F1F1" height="65.6094" id="RowDataDeltaSinkBuilder" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="211" x="3081.97" y="215"/><ellipse cx="3105.07" cy="231" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M3107.07,227.5 Q3107.2731,227 3107.5075,226.75 Q3107.7419,226.5 3108.0075,226.5 Q3108.4762,226.5 3108.7731,226.7813 Q3109.07,227.0625 3109.07,227.7188 L3109.07,229.2813 Q3109.07,229.9375 3108.7887,230.2188 Q3108.5075,230.5 3108.07,230.5 Q3107.6794,230.5 3107.4294,230.3281 Q3107.1794,230.1563 3107.07,229.7031 Q3107.0231,229.3906 3106.8512,229.2188 Q3106.5387,228.8906 3105.9762,228.7031 Q3105.4137,228.5 3104.8512,228.5 Q3104.1481,228.5 3103.5544,228.7813 Q3102.9762,229.0625 3102.5231,229.6875 Q3102.07,230.3125 3102.07,231.1719 L3102.07,232.0938 Q3102.07,233.125 3102.9137,233.8125 Q3103.7575,234.5 3105.2575,234.5 Q3106.1481,234.5 3106.7731,234.2969 Q3107.1325,234.1875 3107.5387,233.8281 Q3107.8044,233.625 3107.945,233.5625 Q3108.0856,233.5 3108.2575,233.5 Q3108.5856,233.5 3108.82,233.7656 Q3109.07,234.0156 3109.07,234.375 Q3109.07,234.7188 3108.7262,235.125 Q3108.2262,235.7188 3107.4294,236.0469 Q3106.3825,236.5 3105.1012,236.5 Q3103.6012,236.5 3102.3981,235.9063 Q3101.4294,235.4375 3100.7419,234.4219 Q3100.07,233.4063 3100.07,232.2031 L3100.07,231.1094 Q3100.07,229.8594 3100.6637,228.7656 Q3101.2731,227.6719 3102.32,227.0938 Q3103.3825,226.5 3104.57,226.5 Q3105.2887,226.5 3105.9137,226.75 Q3106.5387,227 3107.07,227.5 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="161" x="3120.87" y="236.7285">RowDataDeltaSinkBuilder</text><line style="stroke:#181818;stroke-width:0.5;" x1="3082.97" x2="3291.97" y1="247" y2="247"/><line style="stroke:#181818;stroke-width:0.5;" x1="3082.97" x2="3291.97" y1="255" y2="255"/><ellipse cx="3092.97" cy="269.3047" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="185" x="3101.97" y="273.5332">build() : DeltaSink&lt;RowData&gt;</text></g><!--MD5=[5ac252ee98b558a133a82d9e2ee988e1]
reverse link Serializable to Sink--><g id="link_Serializable_Sink"><path d="M2203.76,95.72 C1954.33,125.64 1139.59,223.36 972.55,243.39 " fill="none" id="Serializable-backto-Sink" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="2203.07,88.75,2223.76,93.32,2204.74,102.65,2203.07,88.75" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[d429ed65c939d455e958c15886b89049]
reverse link SinkWriter to DeltaWriter--><g id="link_SinkWriter_DeltaWriter"><path d="M435.47,286.17 C401.32,317.9 351.63,364.07 312.19,400.71 " fill="none" id="SinkWriter-backto-DeltaWriter" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="431,280.76,450.42,272.28,440.53,291.02,431,280.76" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[67ea85563cc7d2d8fef1a7e6a825ba91]
reverse link Serializable to DeltaCommittable--><g id="link_Serializable_DeltaCommittable"><path d="M2349.12,88.51 C2493.74,95.93 2815.83,135.45 2956.47,337 C3002.75,403.34 2987.59,444.34 2956.47,519 C2937.57,564.32 2899.21,603.48 2864.33,631.99 " fill="none" id="Serializable-backto-DeltaCommittable" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="2348.78,95.5,2329.11,87.64,2349.4,81.52,2348.78,95.5" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[ac33f4424ad30880bc8be47615ed4118]
reverse link Sink to DeltaSinkInternal--><g id="link_Sink_DeltaSinkInternal"><path d="M991.52,266.64 C1078.09,297.77 1260.85,363.49 1388.54,409.4 " fill="none" id="Sink-backto-DeltaSinkInternal" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="989.09,273.2,972.63,259.85,993.82,260.03,989.09,273.2" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[17555ea511bf66a217777857735ff405]
reverse link Serializable to DeltaSinkBuilder--><g id="link_Serializable_DeltaSinkBuilder"><path d="M2276.47,130.28 C2276.47,202.77 2276.47,347.74 2276.47,418.4 " fill="none" id="Serializable-backto-DeltaSinkBuilder" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="2269.47,130.27,2276.47,110.27,2283.47,130.27,2269.47,130.27" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[03cc18c1b2e06106fd7a7b014d606460]
reverse link DeltaSinkBuilder to DefaultDeltaFormatBuilder--><g id="link_DeltaSinkBuilder_DefaultDeltaFormatBuilder"><path d="M2276.47,521.75 C2276.47,563 2276.47,615.91 2276.47,649.27 " fill="none" id="DeltaSinkBuilder-backto-DefaultDeltaFormatBuilder" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="2269.47,521.7,2276.47,501.7,2283.47,521.7,2269.47,521.7" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[a475398bf12a2c947010418b01fc2d85]
reverse link Committer to DeltaCommitter--><g id="link_Committer_DeltaCommitter"><path d="M829.47,292.32 C829.47,332.27 829.47,390.69 829.47,426.71 " fill="none" id="Committer-backto-DeltaCommitter" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="822.47,292.28,829.47,272.28,836.47,292.28,822.47,292.28" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[843146761da02e67e82809acbe23cf4c]
reverse link GlobalCommitter to DeltaGlobalCommitter--><g id="link_GlobalCommitter_DeltaGlobalCommitter"><path d="M233.76,253.12 C173.89,261.08 98.87,282.26 59.47,337 C12.21,402.65 6,458.3 59.47,519 C150.23,622.05 538.57,566.52 672.47,597 C721.74,608.22 774.99,625.16 819.94,640.93 " fill="none" id="GlobalCommitter-backto-DeltaGlobalCommitter" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="233.15,246.14,253.81,250.86,234.72,260.06,233.15,246.14" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[5cfb6f6767ef4c6099d61cc62ac16fd0]
reverse link DeltaSinkInternal to DeltaSink--><g id="link_DeltaSinkInternal_DeltaSink"><path d="M1670.48,402.43 C1759.26,370.08 1876.34,332.98 1983.97,316.5 C2039.81,307.95 2947.48,298.3 3000.97,316.5 C3064.78,338.21 3123.81,391.55 3157.71,426.72 " fill="none" id="DeltaSinkInternal-backto-DeltaSink" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="1672.89,409.01,1651.7,409.36,1668.04,395.87,1672.89,409.01" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[47983aaced35ee6b00b7e94dc2d64261]
link DeltaSink to DeltaSinkInternal--><!--MD5=[4a375bfdca839d9feb1ebf1f15c6afb3]
link DeltaSinkInternal to DeltaWriter--><g id="link_DeltaSinkInternal_DeltaWriter"><path codeLine="117" d="M1356.85,409.44 C1264.77,384.61 1148.4,357.41 1042.47,345 C909.6,329.43 569.36,309.19 440.47,345 C401.56,355.81 362.65,376.9 330.19,398.11 " fill="none" id="DeltaSinkInternal-to-DeltaWriter" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="325.86,400.96,335.5738,399.3344,330.0312,398.203,331.1626,392.6604,325.86,400.96" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43" x="863.97" y="325.4951">creates</text></g><!--MD5=[4a375bfdca839d9feb1ebf1f15c6afb3]
link DeltaSinkInternal to DeltaWriter--><!--MD5=[33057ed646be45d759ecfbb907131a69]
link DeltaSinkInternal to DeltaGlobalCommitter--><g id="link_DeltaSinkInternal_DeltaGlobalCommitter"><path codeLine="118" d="M1391.44,510.62 C1286.16,549.31 1141.53,602.46 1041.66,639.16 " fill="none" id="DeltaSinkInternal-to-DeltaGlobalCommitter" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="1036.94,640.9,1046.7675,641.5476,1041.6327,639.1741,1044.0061,634.0393,1036.94,640.9" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43" x="1280.47" y="563.4951">creates</text></g><!--MD5=[e50786cfc411791024e20b19298d988d]
link DeltaSinkInternal to DeltaCommitter--><g id="link_DeltaSinkInternal_DeltaCommitter"><path codeLine="119" d="M1104.34,460 C1078.68,460 1053.59,460 1029.64,460 " fill="none" id="DeltaSinkInternal-to-DeltaCommitter" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="1024.55,460,1033.55,464,1029.55,460,1033.55,456,1024.55,460" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43" x="1042.97" y="453.4951">creates</text></g><!--MD5=[e50786cfc411791024e20b19298d988d]
link DeltaSinkInternal to DeltaCommitter--><!--MD5=[b886f9e7500fcfe426dfd78348093bc0]
link RowDataDeltaSinkBuilder to DeltaSink--><g id="link_RowDataDeltaSinkBuilder_DeltaSink"><path codeLine="120" d="M3187.47,281.35 C3187.47,319.23 3187.47,381.85 3187.47,421.73 " fill="none" id="RowDataDeltaSinkBuilder-to-DeltaSink" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="3187.47,426.96,3191.47,417.96,3187.47,421.96,3183.47,417.96,3187.47,426.96" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43" x="3188.47" y="325.4951">creates</text></g><!--MD5=[0c294b6bc5c1781c484d49313d79180b]
reverse link DeltaGlobalCommittable to DeltaCommittable--><g id="link_DeltaGlobalCommittable_DeltaCommittable"><path codeLine="121" d="M2776.59,514.8 C2779.99,550.48 2784.41,596.95 2787.73,631.77 " fill="none" id="DeltaGlobalCommittable-backto-DeltaCommittable" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="2775.34,501.7,2771.9249,508.0511,2776.474,513.6463,2779.8891,507.2952,2775.34,501.7" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67" x="2781.47" y="563.4951">aggregation</text></g><!--MD5=[2ac84ec68df4c4d08860c300249f9ca7]
link DeltaGlobalCommitter to DeltaWriterBucketState--><!--MD5=[dd7e7e0f681ffafd94ea8f3068f90b78]
link DeltaPendingFile to DeltaWriterBucketState--><rect fill="#FFFFFF" height="137.2656" id="_legend" rx="7.5" ry="7.5" style="stroke:#000000;stroke-width:1.0;" width="219" x="1559.735" y="802"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4" x="1564.735" y="821.5332"></text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="31" x="1568.735" y="841.1426">field</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="53" x="1607.735" y="841.1426">method</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="8" x="1664.735" y="841.1426"></text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="8" x="1564.735" y="858.752"></text><image height="9" width="11" x="1572.735" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAJCAYAAADkZNYtAAAAIElEQVR4XmP4TwJggDFOaBrgxFgVYwPDSjEujKGYGAAAweNd5L3ldi8AAAAASUVORK5CYII=" y="852.8281"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="20" x="1583.735" y="858.752"></text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="12" x="1603.735" y="858.752"></text><image height="9" width="11" x="1615.735" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAJCAYAAADkZNYtAAAAI0lEQVR4XmP4TwJggDFOaBrgxFgVf/KNwcDDSjEujKGYGAAAZS47UlxPSKUAAAAASUVORK5CYII=" y="852.8281"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="20" x="1626.735" y="858.752"></text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="1668.735" y="858.752">private</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="8" x="1564.735" y="876.3613"></text><image height="9" width="11" x="1572.735" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAJCAYAAADkZNYtAAAAX0lEQVR4XmP4jwZePzzyf3Ov0v8Xd/eiS/1nQOaAFO6YYvD/yv5mMI2uAa4YphCmAJ0PV4xNAps4w68fH8FuvLS7BkUhDFw/3AWWB6kjzWRcEuh8FMUgQHRowAC+cAYAGoBjXc6wF6kAAAAASUVORK5CYII=" y="870.4375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="12" x="1583.735" y="876.3613"></text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="12" x="1603.735" y="876.3613"></text><image height="9" width="11" x="1615.735" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAJCAYAAADkZNYtAAAAgUlEQVR4XmP4jwZePzzwf3Ov0v8Xd/eiS/1nQOaAFO6YovH/yn4PIG2AoQGuGKbwxV0rIM8FyE/C0ABWjK4QhtE1MPz68RHsxku7DVAUwvD1w35geZA6qMlzgSaoYjHZHiiuizAZTGLRgK4QRTEIwDRc2W+CoRAEUBSDAEgDrnAGAFQBVAR28bEeAAAAAElFTkSuQmCC" y="870.4375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="12" x="1626.735" y="876.3613"></text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60" x="1668.735" y="876.3613">protected</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="8" x="1564.735" y="893.9707"></text><image height="9" width="11" x="1572.735" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAJCAYAAADkZNYtAAAAbklEQVR4XmP4jwW8/fwDXQgMGNAFXn749l8yecH/Z+++okthKo6buOd/cNeO/1H9u////vsPRQ5F8Zrjd+GKQJqWHrqFLI1QDLLerHwN3Hp0PopibCYh2wQCYMXogsgA2RAGmO8JYZBzMEIDHwAACEtiWrpEXIkAAAAASUVORK5CYII=" y="888.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="20" x="1583.735" y="893.9707"></text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="12" x="1603.735" y="893.9707"></text><image height="9" width="11" x="1615.735" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAJCAYAAADkZNYtAAAAk0lEQVR4XmP4jwW8/fwDXQgMGNAFbj/7+F8yecH/Z+++okthKrYsW/vfuHjV/6j+3f9///2HIoeiuGXVmf8qmUv+O5Sv/+/VvOX/0kO3kKURikHWK2Qs/m9buu6/I0hx/eb/JqWrUZwDVwyy3ih/JVghDEf37kJxDlgxsvXIisE2IDmH4eWHb2DfE8Ig52CEBj4AAPHgSvMnnUOnAAAAAElFTkSuQmCC" y="888.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="16" x="1626.735" y="893.9707"></text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101" x="1668.735" y="893.9707">package private</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="8" x="1564.735" y="911.5801"></text><image height="9" width="11" x="1572.735" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAJCAYAAADkZNYtAAAAZ0lEQVR4XmP4TwJgQOZsuXniv9ms3P/8bYH/9aZl/F9z9TCyNEIxSKHyhPj/B+5fBPNPPL4O5iNrgCsGmQhTCAMgDdpTUuF8uGLhjmC4IDLgbvGDs8kzmSQ3gwAsNEBWg0zEGRrEAABZTGJyS+bBWgAAAABJRU5ErkJggg==" y="905.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="20" x="1583.735" y="911.5801"></text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="12" x="1603.735" y="911.5801"></text><image height="9" width="11" x="1615.735" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAJCAYAAADkZNYtAAAAm0lEQVR4XmP4TwJgQOZMPLb0v2J/xH+uZp//qhPj/6++cghZGqG4+/D8/yIdAf9T1pX+b9nX8j9jQ/l/mZ6I/2uuHsZULN8XBlcIw3mba/9rT0nFVMzd4o2iEITb9rcBxf0wFatPisMwuefwbOwmb7h+5L9kd+j/1PVlEFMPTP2v1B+H3c0gsOXmif8mM7PBVoNMRFYIAiiKCQEALytKAUy38jwAAAAASUVORK5CYII=" y="905.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="20" x="1626.735" y="911.5801"></text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="1668.735" y="911.5801">public</text><line style="stroke:#000000;stroke-width:1.0;" x1="1564.735" x2="1773.735" y1="826.6094" y2="826.6094"/><line style="stroke:#000000;stroke-width:1.0;" x1="1564.735" x2="1773.735" y1="844.2188" y2="844.2188"/><line style="stroke:#000000;stroke-width:1.0;" x1="1564.735" x2="1773.735" y1="861.8281" y2="861.8281"/><line style="stroke:#000000;stroke-width:1.0;" x1="1564.735" x2="1773.735" y1="879.4375" y2="879.4375"/><line style="stroke:#000000;stroke-width:1.0;" x1="1564.735" x2="1773.735" y1="897.0469" y2="897.0469"/><line style="stroke:#000000;stroke-width:1.0;" x1="1564.735" x2="1773.735" y1="914.6563" y2="914.6563"/><line style="stroke:#000000;stroke-width:1.0;" x1="1564.735" x2="1564.735" y1="826.6094" y2="914.6563"/><line style="stroke:#000000;stroke-width:1.0;" x1="1603.735" x2="1603.735" y1="826.6094" y2="914.6563"/><line style="stroke:#000000;stroke-width:1.0;" x1="1664.735" x2="1664.735" y1="826.6094" y2="914.6563"/><line style="stroke:#000000;stroke-width:1.0;" x1="1773.735" x2="1773.735" y1="826.6094" y2="914.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4" x="1564.735" y="931.1895"></text><!--MD5=[c3906a41e1d73ff953d51e718a3e65b9]
@startuml
'https://plantuml.com/class-diagram

package "java.io" #DDDDDD {
  interface Serializable
}

package "org.apache.flink" #DDDDDD {

  interface Sink extends Serializable

  interface SinkWriter

  interface PendingFileRecoverable

  interface GlobalCommitter

  interface Committer

}

/' - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - '/
package "io.delta.flink.internal" {

  class DeltaWriter<IN> implements SinkWriter {

    + write(IN, Context) : void
    + prepareCommit(boolean) : List<DeltaCommittable>
    + snapshotState() : List<DeltaWriterBucketState>
    + close() : void
  }

  class DeltaCommittable implements Serializable {
    - deltaPendingFile : DeltaPendingFile
    - appId : String
    - checkpointId : long
  }

  class DeltaPendingFile {
    - partitionSpec : LinkedHashMap<String, String>
    - fileName : String
    - pendingFile : PendingFileRecoverable
    - recordCount : long
    - fileSize : long
    - lastUpdateTime : long

    + toAddFile() : AddFile
  }

  class DeltaWriterBucketState {
    - bucketId : String
    - bucketPath : Path
    - appId : String

    + getBucketId() : String
    + getBucketPath() : Path
    + getAppId() : String
  }

  class DeltaGlobalCommittable {
    - deltaCommittables : List<DeltaCommittable>

    + getDeltaCommittables() : List<DeltaCommittable>
  }

  class DeltaSinkInternal implements Sink {

    + createWriter(InitContext context, List<DeltaWriterBucketState> states : DeltaWriter<IN, DeltaCommittable, DeltaWriterBucketState>
    + createCommitter() : Optional<Committer<DeltaCommittable>>
    + createGlobalCommitter() : Optional<GlobalCommitter<DeltaCommittable, DeltaGlobalCommittable>>
  }

  class DeltaSinkBuilder<IN> implements Serializable {

   + createCommitter() : Committer<DeltaCommittable>
   + createGlobalCommitter() : GlobalCommitter<DeltaCommittable, DeltaGlobalCommittable>
  }

  class DefaultDeltaFormatBuilder<IN> extends DeltaSinkBuilder {

    + build() : DeltaSinkInternal<IN>
  }

  class DeltaCommitter implements Committer {

    + commit(List<DeltaCommittable>) : List<DeltaCommittable>
  }

  class DeltaGlobalCommitter implements GlobalCommitter {

    + combine(List<DeltaCommittable>) : DeltaGlobalCommittable
    + commit(List<DeltaGlobalCommittable>) : List<DeltaGlobalCommittable>
  }

  note left of DeltaCommitter::commit
    Commit Parquet files
    locally to disk.
  end note

  note left of DeltaGlobalCommitter::commit
    Commit data to _delta_log.
  end note
}

package "io.delta.flink.sink" {
  class DeltaSink<IN> extends DeltaSinkInternal {

    + {static} forRowData() : RowDataDeltaSinkBuilder
  }

  class RowDataDeltaSinkBuilder {

    + build() : DeltaSink<RowData>
  }
}

/' extra links/relations '/
DeltaSinkInternal ..> DeltaWriter : creates
DeltaSinkInternal ..> DeltaGlobalCommitter : creates
DeltaSinkInternal ..> DeltaCommitter : creates
RowDataDeltaSinkBuilder ..> DeltaSink : creates
DeltaGlobalCommittable o- - DeltaCommittable : aggregation

/' layout '/
DeltaSink -[hidden]right- DeltaSinkInternal
DeltaSinkInternal -[hidden]right- DeltaWriter
DeltaSinkInternal -[hidden]right- DeltaCommitter

DeltaGlobalCommitter -[hidden]right- DeltaWriterBucketState
DeltaPendingFile -[hidden]right- DeltaWriterBucketState

/' legend '/
skinparam legendBackgroundColor #ffffff
legend

|= field |= method |=  |
|  <img:http://s.plantuml.com/private-field.png>     |   <img:http://s.plantuml.com/private-method.png>     | private |
|  <img:http://s.plantuml.com/protected-field.png>   |   <img:http://s.plantuml.com/protected-method.png>   | protected |
|  <img:http://s.plantuml.com/package-private-field.png>     |   <img:http://s.plantuml.com/package-private-method.png>    | package private |
|  <img:http://s.plantuml.com/public-field.png>     |   <img:http://s.plantuml.com/public-method.png>     | public |

endlegend

@enduml

@startuml

package "java.io" #DDDDDD {
  interface Serializable
}

package "org.apache.flink" #DDDDDD {

  interface Sink extends Serializable

  interface SinkWriter

  interface PendingFileRecoverable

  interface GlobalCommitter

  interface Committer

}

package "io.delta.flink.internal" {

  class DeltaWriter<IN> implements SinkWriter {

    + write(IN, Context) : void
    + prepareCommit(boolean) : List<DeltaCommittable>
    + snapshotState() : List<DeltaWriterBucketState>
    + close() : void
  }

  class DeltaCommittable implements Serializable {
    - deltaPendingFile : DeltaPendingFile
    - appId : String
    - checkpointId : long
  }

  class DeltaPendingFile {
    - partitionSpec : LinkedHashMap<String, String>
    - fileName : String
    - pendingFile : PendingFileRecoverable
    - recordCount : long
    - fileSize : long
    - lastUpdateTime : long

    + toAddFile() : AddFile
  }

  class DeltaWriterBucketState {
    - bucketId : String
    - bucketPath : Path
    - appId : String

    + getBucketId() : String
    + getBucketPath() : Path
    + getAppId() : String
  }

  class DeltaGlobalCommittable {
    - deltaCommittables : List<DeltaCommittable>

    + getDeltaCommittables() : List<DeltaCommittable>
  }

  class DeltaSinkInternal implements Sink {

    + createWriter(InitContext context, List<DeltaWriterBucketState> states : DeltaWriter<IN, DeltaCommittable, DeltaWriterBucketState>
    + createCommitter() : Optional<Committer<DeltaCommittable>>
    + createGlobalCommitter() : Optional<GlobalCommitter<DeltaCommittable, DeltaGlobalCommittable>>
  }

  class DeltaSinkBuilder<IN> implements Serializable {

   + createCommitter() : Committer<DeltaCommittable>
   + createGlobalCommitter() : GlobalCommitter<DeltaCommittable, DeltaGlobalCommittable>
  }

  class DefaultDeltaFormatBuilder<IN> extends DeltaSinkBuilder {

    + build() : DeltaSinkInternal<IN>
  }

  class DeltaCommitter implements Committer {

    + commit(List<DeltaCommittable>) : List<DeltaCommittable>
  }

  class DeltaGlobalCommitter implements GlobalCommitter {

    + combine(List<DeltaCommittable>) : DeltaGlobalCommittable
    + commit(List<DeltaGlobalCommittable>) : List<DeltaGlobalCommittable>
  }

  note left of DeltaCommitter::commit
    Commit Parquet files
    locally to disk.
  end note

  note left of DeltaGlobalCommitter::commit
    Commit data to _delta_log.
  end note
}

package "io.delta.flink.sink" {
  class DeltaSink<IN> extends DeltaSinkInternal {

    + {static} forRowData() : RowDataDeltaSinkBuilder
  }

  class RowDataDeltaSinkBuilder {

    + build() : DeltaSink<RowData>
  }
}

DeltaSinkInternal ..> DeltaWriter : creates
DeltaSinkInternal ..> DeltaGlobalCommitter : creates
DeltaSinkInternal ..> DeltaCommitter : creates
RowDataDeltaSinkBuilder ..> DeltaSink : creates
DeltaGlobalCommittable o- - DeltaCommittable : aggregation

DeltaSink -[hidden]right- DeltaSinkInternal
DeltaSinkInternal -[hidden]right- DeltaWriter
DeltaSinkInternal -[hidden]right- DeltaCommitter

DeltaGlobalCommitter -[hidden]right- DeltaWriterBucketState
DeltaPendingFile -[hidden]right- DeltaWriterBucketState

skinparam legendBackgroundColor #ffffff
legend

|= field |= method |=  |
|  <img:http://s.plantuml.com/private-field.png>     |   <img:http://s.plantuml.com/private-method.png>     | private |
|  <img:http://s.plantuml.com/protected-field.png>   |   <img:http://s.plantuml.com/protected-method.png>   | protected |
|  <img:http://s.plantuml.com/package-private-field.png>     |   <img:http://s.plantuml.com/package-private-method.png>    | package private |
|  <img:http://s.plantuml.com/public-field.png>     |   <img:http://s.plantuml.com/public-method.png>     | public |

endlegend

@enduml

PlantUML version 1.2022.12(Sun Oct 23 20:12:26 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1250
Language: pl
Country: PL
--></g></svg>